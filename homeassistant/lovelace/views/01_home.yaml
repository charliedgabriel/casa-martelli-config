# lovelace_gen

- title: Home
  icon: mdi:home
  path: home
  cards:
    - type: horizontal-stack
      cards:
        - !include
          - ../includes/header.yaml
          - title: "Home"
        # Home Header
        - type: weather-forecast
          entity: weather.home
          show_forecast: false
          style: |
            ha-card {
              background: none;
              box-shadow: none;
            }
            .name-state {
              display: none !important;
            }
            .icon-image svg {
              height: 28px;
              margin-bottom: -10px !important;
            }
            .info, .temp-attribute, .temp, .icon-image, svg, .content {
              display: inline !important;
              text-align: right;
            }
            .content {
              margin-top: 12px;
              position: absolute !important;
              right: 16px !important;
            }

    - type: markdown
      card-size: 3
      content: >
        {% raw %}
        {% set light_count = states.light | selectattr('state','equalto','on') | list | count %}
        {%- if light_count == 1 -%}
          C'é una luce accesa.
        {%- else -%}
          Ci sono {{ light_count }} luci accese.
        {%- endif -%}
        {{ " " }}Domani bisogna buttare{{ " " }}
        {%- set today = states("sensor.casa_rifiuti_di_domani") %}
        {%- if 'PAPER' in today -%}
            la carta
        {%- elif 'PLASTIC' in today -%}
            il multimateriale
        {%- elif 'DRY' in today -%}
            il secco
        {%- elif 'ORGANIC' in today -%}
            l'umido
        {%- elif 'GLASS' in today -%}
            il vetro
        {% else %}
            niente
        {% endif %}.
        {% set people = states.person | selectattr('state','equalto','home') | list %}
        {%- if people | count > 0 -%}
          {%- if people | count == 1 -%}
            A casa c'é
          {%- else -%}
            A casa ci sono
          {%- endif -%}
          {{ " " }}
          {%- for p in people -%}
            {{- p.attributes.friendly_name.split(" ")[0] -}}
            {%- if not loop.last -%}
              {{ ", " }}
            {%- endif -%}
          {%- endfor -%} 
        {%- else %}
          A casa non c'é nessuno
        {%- endif -%}.
        {%- if not states.binary_sensor.casa_presenza_acqua.state -%}
          Non c'é fornitura di acqua.
        {%- endif -%}
        {% endraw %}
      style: |
        ha-card {
          background: none;
          box-shadow: none;
        }
        ha-markdown {
          padding-top: 0 !important;
        }

    - type: vertical-stack
      cards:
        - !include
          - ../includes/section.yaml
          - title: Più usati
        - !include
          - ../includes/grid.yaml
          - entities:
              - entity_id: group.areas_soggiorno
                name: Soggiorno
              - entity_id: light.corridoio_notturna
                name: Corridoio
              - entity_id: light.cameretta_scrivania
                name: Scrivania
              - entity_id: light.cortile_frontale
                name: Cortile
              - entity_id: lock.cortile_pedonale
                name: Pedonale

    - type: vertical-stack
      cards:
        # Rooms
        - !include
          - ../includes/section.yaml
          - title: Stanze
        - type: vertical-stack
          cards:
            - type: custom:mod-card
              card:
                type: custom:layout-card
                layout: horizontal
                min_columns: 2
                justify_content: start
                cards:
                  {% for room in _global.rooms %}
                  - type: custom:decluttering-card
                    template: "hk_simple_link"
                    variables:
                      - path: {{ room.name | lower | replace(" ", "_") }}
                      - name: {{ room.name }}
                      - icon: {{ room.icon }}
                  {% endfor %}
